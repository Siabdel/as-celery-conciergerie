<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Fiche Colis - MaLogistique</title>
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Ic√¥nes -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <!-- Vue.js 3 -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <style>
    :root {
      --color-primary: #FF6B35;
      --color-secondary: #005E9B;
      --color-light: #FFFFFF;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f5f7fa;
    }
    .header-main {
      background-color: var(--color-secondary);
      color: white;
    }
    .card-custom {
      border-left: 4px solid var(--color-primary);
      box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,0.075);
    }
    .status-badge {
      font-size: 0.85em;
    }
    .event-timeline {
      position: relative;
      padding-left: 30px;
    }
    .event-timeline::before {
      content: '';
      position: absolute;
      left: 10px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: #dee2e6;
    }
    .event-dot {
      position: absolute;
      left: 4px;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--color-secondary);
    }
    .proof-img {
      height: 120px;
      object-fit: cover;
      cursor: pointer;
    }
    .section-title {
      color: var(--color-secondary);
      border-bottom: 2px solid var(--color-primary);
      padding-bottom: 5px;
      display: inline-block;
    }
    .btn-primary {
      background-color: var(--color-primary);
      border-color: var(--color-primary);
    }
    .btn-secondary {
      background-color: var(--color-secondary);
      border-color: var(--color-secondary);
    }
    .footer-links a {
      color: var(--color-secondary);
      text-decoration: none;
    }
    .footer-links a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

<div id="app">
  <!-- Header -->
  <header class="header-main py-3 mb-4">
    <div class="container">
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-center">
        <div class="mb-3 mb-md-0">
          <h1 class="h4 mb-0">üì¶ Fiche Colis #{{ colis.numero }}</h1>
          <div class="d-flex align-items-center mt-1">
            <span class="badge bg-light text-dark me-2">Statut : {{ colis.statut }}</span>
            <select v-model="colis.statut" class="form-select form-select-sm w-auto">
              <option v-for="s in statutsPossibles" :value="s">{{ s }}</option>
            </select>
          </div>
        </div>
        <div>
          <button class="btn btn-sm btn-light me-2"><i class="bi bi-bell"></i> Notifier</button>
          <button class="btn btn-sm btn-light"><i class="bi bi-envelope"></i> Email</button>
        </div>
      </div>
    </div>
  </header>

  <main class="container mb-5">
    <!-- Informations g√©n√©rales -->
    <section class="mb-5">
      <h2 class="section-title mb-4">D√©tails du colis</h2>
      <div class="row g-4">
        <!-- Exp√©diteur -->
        <div class="col-lg-4">
          <div class="card card-custom h-100">
            <div class="card-header bg-white">Exp√©diteur</div>
            <div class="card-body">
              <h5 class="card-title">{{ colis.expediteur.nom }}</h5>
              <p class="card-text small">
                {{ colis.expediteur.adresse }}<br>
                {{ colis.expediteur.cp }} {{ colis.expediteur.ville }}<br>
                üìû {{ colis.expediteur.tel }}<br>
                ‚úâÔ∏è {{ colis.expediteur.email }}
              </p>
            </div>
          </div>
        </div>

        <!-- Destinataire -->
        <div class="col-lg-4">
          <div class="card card-custom h-100">
            <div class="card-header bg-white">Destinataire</div>
            <div class="card-body">
              <h5 class="card-title">{{ colis.destinataire.nom }}</h5>
              <p class="card-text small">
                {{ colis.destinataire.adresse }}<br>
                {{ colis.destinataire.cp }} {{ colis.destinataire.ville }}<br>
                üìû {{ colis.destinataire.tel }}<br>
                ‚úâÔ∏è {{ colis.destinataire.email }}
              </p>
            </div>
          </div>
        </div>

        <!-- D√©tails logistiques -->
        <div class="col-lg-4">
          <div class="card card-custom h-100">
            <div class="card-header bg-white">D√©tails logistiques</div>
            <div class="card-body small">
              <ul class="list-unstyled mb-0">
                <li class="mb-2"><strong>Poids :</strong> {{ colis.poids }} kg</li>
                <li class="mb-2"><strong>Valeur d√©clar√©e :</strong> {{ colis.valeur }} ‚Ç¨</li>
                <li class="mb-2"><strong>Mode livraison :</strong> <span class="badge bg-info">{{ colis.modeLivraison }}</span></li>
                <li class="mb-2"><strong>Mode paiement :</strong> <span class="badge bg-success">{{ colis.modePaiement }}</span></li>
                <li class="mb-2"><strong>Relais :</strong> {{ colis.pointRelais.nom }}</li>
                <li><strong>Adresse :</strong> {{ colis.pointRelais.adresse }}, {{ colis.pointRelais.cp }} {{ colis.pointRelais.ville }}</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Historique -->
    <section class="mb-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="section-title mb-0">Historique des √©v√©nements</h2>
        <button class="btn btn-sm btn-outline-primary" @click="ajouterEvenement"><i class="bi bi-plus-circle"></i> Ajouter un √©v√©nement</button>
      </div>
      <div class="card card-custom">
        <div class="card-body">
          <div class="event-timeline">
            <div v-for="(event, index) in colis.historique" :key="index" class="position-relative mb-4">
              <div class="event-dot"></div>
              <div class="ps-3">
                <div class="d-flex flex-wrap justify-content-between">
                  <strong>{{ event.statut }}</strong>
                  <small class="text-muted">{{ event.date }}</small>
                </div>
                <div class="small">
                  <i class="bi bi-person-fill"></i> {{ event.user }} |
                  <i class="bi bi-geo-alt-fill"></i> {{ event.lieu }}
                </div>
                <div v-if="event.details" class="small text-muted mt-1">{{ event.details }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Preuves de livraison -->
    <section class="mb-5">
      <h2 class="section-title mb-4">Preuves de livraison</h2>
      <div class="row g-4">
        <!-- Photos -->
        <div class="col-md-6">
          <div class="card card-custom h-100">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
              Photos
              <button class="btn btn-sm btn-outline-primary"><i class="bi bi-upload"></i> Ajouter</button>
            </div>
            <div class="card-body">
              <div class="d-flex flex-wrap gap-2">
                <img v-for="(photo, index) in colis.preuves.photos" :key="index"
                     :src="photo.url" 
                     :alt="`Preuve ${index+1}`"
                     class="img-thumbnail proof-img rounded"
                     data-bs-toggle="modal" :data-bs-target="`#photoModal${index}`">
                
                <!-- Modals pour agrandir -->
                <div v-for="(photo, index) in colis.preuves.photos" :key="index"
                     class="modal fade" :id="`photoModal${index}`" tabindex="-1">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-body text-center">
                        <img :src="photo.url" class="img-fluid" :alt="`Preuve ${index+1}`">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Signature & Co -->
        <div class="col-md-6">
          <div class="card card-custom h-100">
            <div class="card-header bg-white">Signature & Informations</div>
            <div class="card-body">
              <div class="mb-3">
                <label class="form-label">Signature</label>
                <div class="border p-2 rounded bg-light text-center">
                  <img :src="colis.preuves.signature" alt="Signature" style="max-height: 80px;">
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Commentaire</label>
                <textarea class="form-control" rows="2" readonly>{{ colis.preuves.commentaire }}</textarea>
              </div>
              <div>
                <label class="form-label">Localisation</label><br>
                <a :href="colis.preuves.lienMaps" target="_blank" class="btn btn-sm btn-outline-primary">
                  <i class="bi bi-geo-alt"></i> Voir sur Google Maps
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Documents -->
    <section>
      <h2 class="section-title mb-4">Documents associ√©s</h2>
      <div class="d-flex flex-wrap gap-2">
        <a v-for="(doc, index) in colis.documents" :key="index" 
           :href="doc.url" 
           target="_blank" 
           class="btn btn-outline-secondary d-flex align-items-center">
          <i class="bi bi-file-earmark-text me-2"></i> {{ doc.nom }}
        </a>
      </div>
    </section>
  </main>

  <footer class="bg-light text-center py-4 border-top">
    <div class="container">
      <p class="mb-1 footer-links">
        <a href="#">Mentions l√©gales</a> | 
        <a href="#">Support</a> | 
        <a href="#">Confidentialit√©</a>
      </p>
      <p class="text-muted small mb-0">&copy; 2025 MaLogistique. Tous droits r√©serv√©s.</p>
    </div>
  </footer>
</div>

<script>
const { createApp, ref } = Vue;

const app = createApp({
  setup() {
    const statutsPossibles = ['En transit', 'En point relais', 'Livr√©', 'Retourn√©', 'Incident'];
    
    const colis = ref({
      numero: "TRK123456789",
      statut: "En point relais",
      expediteur: {
        nom: "SARL TechShop",
        adresse: "123 Rue des Entrepreneurs",
        cp: "75001",
        ville: "Paris",
        tel: "+33 1 23 45 67 89",
        email: "contact@techshop.fr"
      },
      destinataire: {
        nom: "Marie Dubois",
        adresse: "456 Avenue de la R√©publique",
        cp: "69002",
        ville: "Lyon",
        tel: "+33 6 12 34 56 78",
        email: "marie.dubois@email.com"
      },
      poids: 2.4,
      valeur: 150,
      modeLivraison: "Relais Colis",
      modePaiement: "Carte bancaire",
      pointRelais: {
        nom: "Relais Colis Lyon Centre",
        adresse: "15 Place Bellecour",
        cp: "69002",
        ville: "Lyon"
      },
      historique: [
        {
          statut: "Exp√©di√©",
          date: "2025-04-01 09:15",
          user: "System",
          lieu: "Entrep√¥t Paris",
          details: "Colis √©tiquet√© et en attente d'enl√®vement"
        },
        {
          statut: "En transit",
          date: "2025-04-01 14:30",
          user: "Jean Transporteur",
          lieu: "Plateforme Lyon",
          details: "Arriv√©e √† la plateforme de tri"
        },
        {
          statut: "En point relais",
          date: "2025-04-02 10:45",
          user: "Sophie Relais",
          lieu: "Relais Colis Lyon Centre",
          details: "Colis disponible en point relais"
        }
      ],
      preuves: {
        photos: [
          { url: "https://picsum.photos/200?random=1" },
          { url: "https://picsum.photos/200?random=2" }
        ],
        signature: "https://via.placeholder.com/200x80?text=Signature",
        commentaire: "Livraison effectu√©e en mains propres.",
        lienMaps: "https://maps.google.com/?q=45.764043,4.835659"
      },
      documents: [
        { nom: "√âtiquette", url: "#" },
        { nom: "Bordereau", url: "#" },
        { nom: "Facture", url: "#" }
      ]
    });

    const ajouterEvenement = () => {
      alert('Formulaire d\'ajout d\'√©v√©nement √† impl√©menter');
    };

    return {
      colis,
      statutsPossibles,
      ajouterEvenement
    };
  }
});

app.mount('#app');
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
